<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Exposition - L’Atelier StephCrea</title>
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Raleway:wght@400;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Lora', serif;
      background-color: #f9f7f3;
      color: #3d3d3d;
    }

    header {
      background-color: #d3a97d;
      color: white;
      text-align: center;
      padding: 3rem 2rem;
    }

    header h1 { font-family: 'Raleway', sans-serif; font-size: 2.5rem; margin: 0; }
    header p  { font-size: 1.2rem; margin: 0.5rem 0 0; }

    nav { text-align: center; margin: 1rem 0; }
    nav a { margin: 0 1rem; text-decoration: none; color: #b9885c; font-weight: bold; }
    nav a:hover { text-decoration: underline; }

    /* Galerie */
    .gallery {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      padding: 2rem;
      max-width: 1400px;
      margin: auto;
    }
    @media (max-width:1100px) { .gallery { grid-template-columns: repeat(3,1fr); } }
    @media (max-width:800px)  { .gallery { grid-template-columns: repeat(2,1fr); } }
    @media (max-width:500px)  { .gallery { grid-template-columns: 1fr; } }

    .item {
      background:#fff;
      border-radius:10px;
      box-shadow:0 2px 6px rgba(0,0,0,0.1);
      overflow:hidden;
      text-align:center;
      padding-bottom:1rem;
      transition:transform .2s;
    }
    .item:hover{ transform:translateY(-5px); }
    .item img{ width:100%; display:block; border-bottom:1px solid #ddd; }
    .item h3{ margin:.5rem 0 .2rem; font-family:'Raleway',sans-serif; color:#b9885c; font-weight:700; font-size:1.05rem; }
    .item p{ font-size:.95rem; margin:.2rem 0 .5rem; }
    .buy-btn{
      background:#b9885c; color:#fff; text-decoration:none;
      padding:.5rem 1.5rem; border-radius:25px;
      display:inline-block; margin-top:.5rem;
      font-weight:700; transition:background .3s;
    }
    .buy-btn:hover{ background:#9a6b45; }

    /* Like button */
    .like-btn {
      display:inline-block;
      margin-top:.3rem;
      font-size:1.3rem;
      color:#ccc;
      cursor:pointer;
      transition: color .2s;
    }
    .like-btn.liked { color:#e74c3c; }

    /* Barre de recherche */
    .search-bar { text-align:center; margin:2rem 0 1rem; }
    .search-bar input {
      width: 320px;
      max-width: 90%;
      padding:.8rem 1rem;
      border:1px solid #ccc;
      border-radius:25px;
      font-size:1rem;
      font-family:'Lora',serif;
      transition: box-shadow .2s, border-color .2s;
    }
    .search-bar input:focus {
      border-color:#b9885c; outline:none;
      box-shadow:0 0 6px rgba(185,136,92,0.25);
    }

    /* FORM CONTAINER */
    .form-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2.5rem 1rem;
      display: flex;
      flex-direction: row;
      gap: 2rem;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: nowrap;
    }

    .contact, .avis {
      background-color: #f7f4ef;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      flex: 0 0 46%;
      min-width: 300px;
      font-family: 'Lora', serif;
    }

    .contact h2, .avis h2 {
      font-family: 'Raleway', sans-serif;
      font-size: 1.6rem;
      color: #b9885c;
      text-align:center;
      margin: 0 0 1rem 0;
      font-weight: 700;
    }

    .contact input, .contact textarea,
    .avis input, .avis textarea {
      width: 100%;
      padding: .75rem 1rem;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 1rem;
      margin-bottom: .9rem;
      font-family: 'Lora', serif;
      transition: border-color .2s, box-shadow .2s;
    }

    .contact input:focus, .contact textarea:focus,
    .avis input:focus, .avis textarea:focus {
      border-color: #b9885c;
      outline: none;
      box-shadow: 0 0 6px rgba(185,136,92,0.2);
    }

    .contact button, .avis button {
      display: block;
      width: 100%;
      background-color: #b9885c;
      color: #fff;
      border: none;
      padding: .85rem;
      border-radius: 25px;
      font-weight: 700;
      cursor: pointer;
      font-size: 1rem;
      transition: background .2s;
    }
    .contact button:hover, .avis button:hover { background-color: #9a6b45; }

    @media (max-width: 900px) {
      .form-container { flex-wrap: wrap; }
      .contact, .avis { flex: 0 0 100%; max-width: 700px; }
    }

    footer {
      background-color: #e9e4dc;
      color: #5c5044;
      text-align:center;
      padding:1.5rem;
      font-size:.9rem;
    }
    footer a { color:#b9885c; text-decoration:none; font-weight:700; }
    footer a:hover { text-decoration:underline; }
  </style>
</head>
<body>

  <header>
    <h1>L’Atelier StephCrea</h1>
    <p>Galerie et boutique artisanale</p>
  </header>

  <nav>
    <a href="index.html">Accueil</a> |
    <a href="exposition.html">Boutique</a> |
    <a href="a-propos.html">À propos</a>
  </nav>

  <div class="search-bar">
    <input id="searchInput" type="text" placeholder="Rechercher un produit...">
  </div>

  <!-- Galerie -->
  <section class="gallery" aria-label="Galerie d'œuvres">
    <div class="item">
      <img src="https://via.placeholder.com/300" alt="oeuvre 1">
      <h3>Œuvre 1</h3>
      <p>Desc...</p>
      <a class="buy-btn" href="#">Acheter</a>
      <a href="#" class="like-btn" aria-label="Ajouter aux favoris" data-id="1">❤</a>
    </div>
    <div class="item">
      <img src="https://via.placeholder.com/300" alt="oeuvre 2">
      <h3>Œuvre 2</h3>
      <p>Desc...</p>
      <a class="buy-btn" href="#">Acheter</a>
      <a href="#" class="like-btn" aria-label="Ajouter aux favoris" data-id="2">❤</a>
    </div>
    <div class="item">
      <img src="https://via.placeholder.com/300" alt="oeuvre 3">
      <h3>Œuvre 3</h3>
      <p>Desc...</p>
      <a class="buy-btn" href="#">Acheter</a>
      <a href="#" class="like-btn" aria-label="Ajouter aux favoris" data-id="3">❤</a>
    </div>
  </section>

  <div class="form-container" role="region" aria-label="Contact et avis clients">
    <section class="contact" aria-labelledby="contact-title">
      <h2 id="contact-title">Contact / Collaboration</h2>
      <form onsubmit="event.preventDefault(); alert('Formulaire contact envoyé (placeholder)');">
        <input type="text" name="nom-contact" placeholder="Votre nom" required>
        <input type="email" name="email-contact" placeholder="Votre email" required>
        <textarea name="msg-contact" rows="5" placeholder="Votre message..." required></textarea>
        <button type="submit">Envoyer</button>
      </form>
    </section>

    <section class="avis" aria-labelledby="avis-title">
      <h2 id="avis-title">Avis des clients</h2>
      <form id="avisForm" onsubmit="event.preventDefault(); addLocalAvis();">
        <input type="text" id="nom-avis" placeholder="Votre nom" required>
        <textarea id="message-avis" rows="4" placeholder="Votre avis..." required></textarea>
        <label for="note-avis">Note :</label>
        <select id="note-avis" required>
          <option value="">Choisir...</option>
          <option value="1">★☆☆☆☆</option>
          <option value="2">★★☆☆☆</option>
          <option value="3">★★★☆☆</option>
          <option value="4">★★★★☆</option>
          <option value="5">★★★★★</option>
        </select>
        <button type="submit">Envoyer</button>
      </form>
      <div id="avisContainer" aria-live="polite" style="margin-top:1rem;"></div>
    </section>
  </div>

  <footer>
    © 2025 L’Atelier StephCrea — <a href="index.html">Accueil</a> | <a href="a-propos.html">À propos</a>
  </footer>

  <script>
    /* Recherche */
    const searchInput = document.getElementById('searchInput');
    const items = document.querySelectorAll('.item');
    searchInput.addEventListener('input', function() {
      const searchTerm = searchInput.value.toLowerCase();
      items.forEach(item => {
        const title = item.querySelector('h3').textContent.toLowerCase();
        const desc  = item.querySelector('p').textContent.toLowerCase();
        item.style.display = (title.includes(searchTerm) || desc.includes(searchTerm)) ? '' : 'none';
      });
    });

    /* Gestion des avis */
    const avisContainer = document.getElementById('avisContainer');
    const AVIS_KEY = 'atelier_avis_demo';
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

    function getLocalAvis(){ try { return JSON.parse(localStorage.getItem(AVIS_KEY)) || []; } catch(e){ return []; } }
    function saveLocalAvis(a){ const list = getLocalAvis(); list.unshift(a); localStorage.setItem(AVIS_KEY, JSON.stringify(list)); renderAvis(list); }

    function renderAvis(list) {
      if(!list || list.length === 0) {
        avisContainer.innerHTML = '<p>Aucun avis pour le moment.</p>';
        return;
      }
      avisContainer.innerHTML = list.map(a => `
        <div style="background:#fff;border-radius:8px;padding:10px;margin-bottom:8px;box-shadow:0 1px 4px rgba(0,0,0,0.08);">
          <strong>${escapeHtml(a.nom)}</strong>
          <p style="margin:.3rem 0;"><strong>Note : </strong>${'★'.repeat(a.note)+'☆'.repeat(5-a.note)}</p>
          <p style="margin:.5rem 0 0;">${escapeHtml(a.message)}</p>
        </div>
      `).join('');
    }

    function addLocalAvis(){
      const nom = document.getElementById('nom-avis').value.trim();
      const message = document.getElementById('message-avis').value.trim();
      const note = parseInt(document.getElementById('note-avis').value);
      if(!nom || !message || !note) return;
      saveLocalAvis({ nom, message, note, date: Date.now() });
      document.getElementById('avisForm').reset();
    }
    renderAvis(getLocalAvis());

    /* Gestion des favoris */
    const FAVORIS_KEY = 'atelier_favoris';
    function getFavoris(){ return JSON.parse(localStorage.getItem(FAVORIS_KEY)) || []; }
    function toggleFavori(id, el){
      let favs = getFavoris();
      if(favs.includes(id)){
        favs = favs.filter(f => f !== id);
        el.classList.remove('liked');
      } else {
        favs.push(id);
        el.classList.add('liked');
      }
      localStorage.setItem(FAVORIS_KEY, JSON.stringify(favs));
    }

    document.querySelectorAll('.like-btn').forEach(btn=>{
      const id = btn.dataset.id;
      const favs = getFavoris();
      if(favs.includes(id)) btn.classList.add('liked');
      btn.addEventListener('click', e=>{
        e.preventDefault();
        toggleFavori(id, btn);
      });
    });
  </script>
</body>
</html>
